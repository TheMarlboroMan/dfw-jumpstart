################################################################################
#Definitions

DIR_O=./objects/

include make/makefile_app
include make/makefile_controllers
include make/makefile_dfw
include make/makefile_app_dependencies

########################
# Common dependencies

include make/makefile_common_dependencies

################################################################################
#Target definitions.

all: \
$(DIR_O)\
$(EXECUTABLE) \

generate_base_project:
	$(DO_CLEAN)\
rm tiles.sh;\
rm editor.sh;\
rm README.md;\
rm -rf integration;\
rm logs/*;\
rm -rf class;\
rm -rf data/config;\
rm -rf data/app_data;\
rm -rf data/audio;\
rm -rf data/fonts;\
rm -rf data/resources;\
rm -rf data/textures;\
rm -rf class/dfwimpl;\
rm data/config/debug_config.dnot;\
rm make/makefile_app;\
rm make/makefile_app_dependencies;\
rm make/makefile_controllers;\
mkdir class;\
mv templates/input.h class;\
mkdir class/dfwimpl;\
mv templates/app_config.* class/dfwimpl;\
mv templates/state_driver.* class/dfwimpl;\
mkdir class/controllers;\
mv templates/states.h class/controllers;\
mv templates/_template.* class/controllers;\
mkdir data/config;\
mv templates/config.dnot data/config;\
mv templates/makefile_app make;\
mv templates/makefile_app_dependencies make;\
mv templates/makefile_controllers make;\
rmdir templates;\
rf -rm .git;\

$(DIR_O):
	$(DO_DIR_OBJECTS)

$(EXECUTABLE): \
$(DIR_LIBDAN2)/libDanSDL2.a\
$(DEP_APP) \
$(DEP_DFW_IMPLEMENTATION) \
$(DEP_CONTROLLERS) \
$(DEP_FRAMEWORK) \
$(DEP_TOOLS) \
$(DEP_APP_DEPENDENCIES) \
main.cpp
	$(CC) $(CFLAGS_TARGET_FINAL) $(INCLUDES) main.cpp \
$(DEP_APP) \
$(DEP_DFW_IMPLEMENTATION) \
$(DEP_CONTROLLERS) \
$(DEP_FRAMEWORK) \
$(DEP_TOOLS) \
$(DEP_APP_DEPENDENCIES) \
-o $(EXECUTABLE) $(LIBRARIES) $(LINKER)

clean:
	$(DO_CLEAN)
